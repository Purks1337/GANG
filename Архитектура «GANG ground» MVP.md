- **Версия:** 1.0

- **Дата:** 25.05.2024

- **Архитектор:** Эксперт-архитектор e-commerce

- **Заказчик/Владелец продукта:** Пользователь

### **1. Краткое описание проекта (Project Brief)**

Целью проекта является быстрый запуск (MVP) имиджевого интернет-магазина одежды с небольшим ассортиментом (4-5 позиций). Ключевые требования — точное воссоздание дизайна из Figma-макета, включая переключение светлой/темной темы, и обеспечение базового функционала для онлайн-продаж: каталог, корзина, онлайн-оплата и доставка через СДЭК.

### **2. Архитектурная концепция**

Выбрана современная **Headless (Decoupled) архитектура**.

- **Frontend (витрина):** Независимое веб-приложение, отвечающее за визуальное представление и взаимодействие с пользователем.

- **Backend (админ-панель и логика):** Отдельная CMS, которая служит только для хранения данных (товары, заказы) и предоставления их фронтенду через API.

Этот подход обеспечивает максимальную гибкость в дизайне, высокую производительность и хороший технологический задел для будущего развития.

### **3. Информационная архитектура (IA)**

- **Структура каталога:** Единый каталог без вложенных категорий для MVP.

- **Фильтрация и сортировка:** Отсутствуют для ускорения разработки.

- **Карта сайта (Sitemap):**

    - `/` — Главная

    - `/catalog` — Каталог товаров

    - `/products/:slug` — Карточка товара

    - `/cart` — Корзина

    - `/checkout` — Оформление заказа

    - `/order/success` — Страница успешного заказа

    - `/order/fail` — Страница ошибки оплаты

    - `/about`, `/collaborations`, `/contacts` — Информационные страницы.

- **Ключевой пользовательский путь:** Главная → Каталог → Карточка товара → Выбор размера → Добавление в корзину → Оформление заказа → Переход к внешней странице оплаты → Возврат на страницу статуса заказа.

### **4. Функциональная архитектура (Детализация модулей)**

- **Header:** Sticky-шапка с логотипом, навигацией, переключателем темы (Day/Night) и иконкой корзины с счетчиком.

- **Карточка товара:** Галерея изображений с миниатюрами, блок с названием/ценой/описанием, обязательный выбор размера из доступных в наличии, кнопка "Добавить в корзину".

- **Корзина и Оформление:** Управление количеством товаров в корзине. На странице оформления — сбор контактных данных и адреса доставки. **Упрощение:** калькулятор доставки СДЭК не интегрируется на фронтенд; доставка оформляется менеджером вручную.

- **Админ-панель (WooCommerce):**

    - Управление товарами и их вариациями (размеры).

    - Для каждой вариации обязательно указывается цена и **количество на складе**.

    - Просмотр и управление заказами.

### **5. Технический стек и интеграции**

#### **Frontend**

- **Фреймворк:** **Next.js** (для SEO и производительности)

- **Стилизация:** **Tailwind CSS** (для быстрой верстки по макету и реализации тем)

- **Управление состоянием:** **React Context API** (для управления корзиной и темой)

- **Хостинг:** **Vercel** (для простого развертывания и высокой скорости)

#### **Backend**

- **CMS:** **WordPress**

- **E-commerce плагин:** **WooCommerce**

- **API:** **WPGraphQL** (для эффективного обмена данными между frontend и backend)

- **Хостинг:** Любой стандартный PHP-хостинг (Beget, Timeweb и т.д.)

#### **Интеграции**

- **Платежный шлюз:** **ЮKassa** или **Тинькофф Оплата** (интеграция через плагин для WooCommerce)

- **Служба доставки:** **СДЭК** (интеграция через плагин для WooCommerce для управления заказами в админ-панели)

#### **Общая схема**

```Mermaid
graph TD
    A[Пользователь] --> B{Frontend: Next.js + TailwindCSS на Vercel};
    B <--> C{Backend: WordPress + WooCommerce на PHP-хостинге};
    C -- WPGraphQL API --> B;
    
    subgraph WordPress Backend
        D[Товары и Заказы];
        E[Плагин ЮKassa];
        F[Плагин СДЭК];
    end

    C --> D;
    C --> E;
    C --> F;

    G[Платежный шлюз ЮKassa] <--> E;
    H[Сервис СДЭК] <--> F;

    B --> G;
```

### **6. Модель данных (Концептуальная)**

Система оперирует следующими основными сущностями: `Category`, `Product` (общий товар), `ProductVariation` (товар с конкретным размером, ценой и остатком), `Order` и `OrderItem`.

```Mermaid
erDiagram
    CATEGORY ||--o{ PRODUCT : contains
    PRODUCT ||--o{ PRODUCT_VARIATION : has
    ORDER ||--o{ ORDER_ITEM : contains
    ORDER_ITEM }|--|| PRODUCT_VARIATION : refers-to
```

### **7. Следующие шаги**

1. **Frontend-разработка:** Верстка всех страниц из Figma на Next.js и Tailwind CSS. Реализация логики переключения темы и добавления в корзину (на стороне клиента).

2. **Backend-настройка:** Установка WordPress + WooCommerce. Установка плагинов WPGraphQL, СДЭК, ЮKassa. Заведение товаров и их вариаций (размеров) в админ-панели.

3. **Интеграция:** Связывание фронтенда с бэкендом через WPGraphQL API для получения данных о товарах и отправки заказов. Настройка процесса перехода на страницу оплаты.

4. **Тестирование:** Проведение полного тестового заказа от выбора товара до успешной оплаты.

5. **Развертывание (Deployment):** Загрузка фронтенда на Vercel, бэкенда — на PHP-хостинг.

